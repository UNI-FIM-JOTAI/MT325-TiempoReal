CCS PCH C Compiler, Version 5.008, 5967               02-dic-14 17:13

               Filename:   D:\IGNACIO\ProgramacionGitHub\MT325-TiempoReal\Sistema\Programa PIC\SistemaPIC18f4550\ComunicacionSerial\ComSerial.lst

               ROM used:   3398 bytes (10%)
                           Largest free fragment is 12288
               RAM used:   1272 (62%) at main() level
                           1302 (64%) worst case
               Stack used: 5 locations (2 in main + 3 for interrupts)
               Stack size: 31

*
0000:  GOTO   08D4
*
0008:  MOVWF  04
000A:  MOVFF  FD8,05
000E:  MOVFF  FE0,06
0012:  MOVLB  0
0014:  MOVFF  FE9,0C
0018:  MOVFF  FEA,07
001C:  MOVFF  FE1,08
0020:  MOVFF  FE2,09
0024:  MOVFF  FD9,0A
0028:  MOVFF  FDA,0B
002C:  MOVFF  FF3,12
0030:  MOVFF  FF4,13
0034:  MOVFF  FFA,14
0038:  MOVFF  00,0E
003C:  MOVFF  01,0F
0040:  MOVFF  02,10
0044:  MOVFF  03,11
0048:  BTFSS  FF2.5
004A:  GOTO   0054
004E:  BTFSC  FF2.2
0050:  GOTO   00A8
0054:  BTFSS  F9D.5
0056:  GOTO   0060
005A:  BTFSC  F9E.5
005C:  GOTO   038C
0060:  MOVFF  0E,00
0064:  MOVFF  0F,01
0068:  MOVFF  10,02
006C:  MOVFF  11,03
0070:  MOVFF  0C,FE9
0074:  MOVFF  07,FEA
0078:  BSF    07.7
007A:  MOVFF  08,FE1
007E:  MOVFF  09,FE2
0082:  MOVFF  0A,FD9
0086:  MOVFF  0B,FDA
008A:  MOVFF  12,FF3
008E:  MOVFF  13,FF4
0092:  MOVFF  14,FFA
0096:  MOVF   04,W
0098:  MOVFF  06,FE0
009C:  MOVFF  05,FD8
00A0:  RETFIE 0
.................... /* 
.................... Tiempo real 
.................... comandos para enviar 
.................... COMANDO: $C0*     //Programa1 
.................... COMANDO: $C1*     //Programa2 
.................... COMANDO: $C2*     //Programa3 
.................... COMANDO: $C3*     //Programa4 
.................... COMANDO: $C4*     //Programa5 
....................  
.................... */ 
.................... #include <18F4550.h> 
.................... //////// Standard Header file for the PIC18F4550 device //////////////// 
.................... #device PIC18F4550 
*
03A2:  DATA 43,6F
03A4:  DATA 6E,65
03A6:  DATA 63,74
03A8:  DATA 61,64
03AA:  DATA 6F,2E
03AC:  DATA 2E,2E
03AE:  DATA 2E,2E
03B0:  DATA 2E,2E
03B2:  DATA 2E,2E
03B4:  DATA 2E,2E
03B6:  DATA 2E,2E
03B8:  DATA 2A,00
*
05C0:  MOVLB  5
05C2:  CLRF   x0F
05C4:  CLRF   x10
05C6:  MOVLW  01
05C8:  MOVWF  x11
05CA:  CLRF   FDA
05CC:  CLRF   FD9
05CE:  MOVLW  05
05D0:  MOVWF  x14
05D2:  MOVLW  07
05D4:  MOVWF  x13
05D6:  MOVLW  05
05D8:  MOVWF  FEA
05DA:  MOVLW  0B
05DC:  MOVWF  FE9
05DE:  MOVFF  514,FE2
05E2:  MOVFF  513,FE1
05E6:  MOVFF  511,512
05EA:  BCF    FD8.0
05EC:  MOVF   FE5,W
05EE:  MULWF  FEE
05F0:  MOVF   FF3,W
05F2:  ADDWFC x0F,F
05F4:  MOVF   FF4,W
05F6:  ADDWFC x10,F
05F8:  DECFSZ x12,F
05FA:  BRA    05EA
05FC:  MOVFF  50F,FDE
0600:  MOVFF  510,50F
0604:  CLRF   x10
0606:  BTFSC  FD8.0
0608:  INCF   x10,F
060A:  INCF   x13,F
060C:  BTFSC  FD8.2
060E:  INCF   x14,F
0610:  INCF   x11,F
0612:  MOVF   x11,W
0614:  SUBLW  05
0616:  BNZ   05D6
0618:  MOVLB  0
061A:  RETURN 0
*
0640:  TBLRD*+
0642:  MOVF   FF5,F
0644:  BZ    0660
0646:  MOVFF  FF6,507
064A:  MOVFF  FF7,508
064E:  MOVF   FF5,W
0650:  BTFSS  F9E.4
0652:  BRA    0650
0654:  MOVWF  FAD
0656:  MOVFF  507,FF6
065A:  MOVFF  508,FF7
065E:  BRA    0640
0660:  RETURN 0
0662:  MOVLB  5
0664:  MOVF   x0E,W
0666:  CLRF   01
0668:  SUBWF  x0D,W
066A:  BC    0672
066C:  MOVFF  50D,00
0670:  BRA    068A
0672:  CLRF   00
0674:  MOVLW  08
0676:  MOVWF  x0F
0678:  RLCF   x0D,F
067A:  RLCF   00,F
067C:  MOVF   x0E,W
067E:  SUBWF  00,W
0680:  BTFSC  FD8.0
0682:  MOVWF  00
0684:  RLCF   01,F
0686:  DECFSZ x0F,F
0688:  BRA    0678
068A:  MOVLB  0
068C:  RETURN 0
068E:  MOVLW  20
0690:  MOVLB  5
0692:  BTFSS  x08.4
0694:  MOVLW  30
0696:  MOVWF  x09
0698:  MOVFF  507,00
069C:  BTFSS  x07.7
069E:  BRA    06B0
06A0:  COMF   00,F
06A2:  INCF   00,F
06A4:  MOVFF  00,507
06A8:  MOVLW  2D
06AA:  MOVWF  x09
06AC:  BSF    x08.7
06AE:  BSF    x08.0
06B0:  MOVF   01,W
06B2:  MOVFF  507,50D
06B6:  MOVLW  64
06B8:  MOVWF  x0E
06BA:  MOVLB  0
06BC:  RCALL  0662
06BE:  MOVFF  00,507
06C2:  MOVLW  30
06C4:  ADDWF  01,W
06C6:  MOVLB  5
06C8:  MOVWF  x0A
06CA:  MOVFF  507,50D
06CE:  MOVLW  0A
06D0:  MOVWF  x0E
06D2:  MOVLB  0
06D4:  RCALL  0662
06D6:  MOVLW  30
06D8:  ADDWF  00,W
06DA:  MOVLB  5
06DC:  MOVWF  x0C
06DE:  MOVLW  30
06E0:  ADDWF  01,W
06E2:  MOVWF  x0B
06E4:  MOVFF  509,00
06E8:  MOVLW  30
06EA:  SUBWF  x0A,W
06EC:  BZ    06F6
06EE:  BSF    x08.1
06F0:  BTFSC  x08.7
06F2:  BSF    x08.2
06F4:  BRA    071A
06F6:  MOVFF  509,50A
06FA:  MOVLW  20
06FC:  MOVWF  x09
06FE:  MOVLW  30
0700:  SUBWF  x0B,W
0702:  BZ    070C
0704:  BSF    x08.0
0706:  BTFSC  x08.7
0708:  BSF    x08.1
070A:  BRA    071A
070C:  BTFSS  FD8.2
070E:  BSF    x08.0
0710:  BNZ   071A
0712:  MOVFF  50A,50B
0716:  MOVLW  20
0718:  MOVWF  x0A
071A:  BTFSC  x08.2
071C:  BRA    0728
071E:  BTFSC  x08.1
0720:  BRA    0730
0722:  BTFSC  x08.0
0724:  BRA    0738
0726:  BRA    0740
0728:  MOVF   x09,W
072A:  BTFSS  F9E.4
072C:  BRA    072A
072E:  MOVWF  FAD
0730:  MOVF   x0A,W
0732:  BTFSS  F9E.4
0734:  BRA    0732
0736:  MOVWF  FAD
0738:  MOVF   x0B,W
073A:  BTFSS  F9E.4
073C:  BRA    073A
073E:  MOVWF  FAD
0740:  MOVF   x0C,W
0742:  BTFSS  F9E.4
0744:  BRA    0742
0746:  MOVWF  FAD
0748:  MOVLB  0
074A:  GOTO   4138 (RETURN)
*
075A:  MOVFF  FF2,0D
075E:  BCF    FF2.7
0760:  ADDWF  FE8,W
0762:  CLRF   FF7
0764:  RLCF   FF7,F
0766:  ADDLW  7F
0768:  MOVWF  FF6
076A:  MOVLW  07
076C:  ADDWFC FF7,F
076E:  TBLRD*-
0770:  MOVF   FF5,W
0772:  MOVWF  FFA
0774:  TBLRD*
0776:  MOVF   FF5,W
0778:  BTFSC  0D.7
077A:  BSF    FF2.7
077C:  MOVWF  FF9
077E:  DATA 18,40
0780:  DATA 30,40
0782:  DATA 54,41
0784:  DATA 54,41
0786:  DATA 54,41
0788:  DATA 54,41
078A:  DATA 54,41
078C:  DATA 54,41
078E:  DATA 54,41
0790:  DATA 54,41
0792:  DATA 78,40
0794:  DATA 54,41
0796:  DATA 54,41
0798:  DATA DE,40
079A:  DATA 54,41
079C:  DATA 4E,41
079E:  DATA 54,41
07A0:  DATA 42,41
07A2:  DATA 40,40
07A4:  DATA 54,41
07A6:  DATA 54,41
07A8:  DATA 60,40
07AA:  DATA 24,4D
07AC:  DATA 30,2A
07AE:  DATA 00,00
07B0:  DATA 24,4D
07B2:  DATA 31,2A
07B4:  DATA 00,00
07B6:  DATA 45,73
07B8:  DATA 70,65
07BA:  DATA 72,61
07BC:  DATA 6E,64
07BE:  DATA 6F,20
07C0:  DATA 63,6F
07C2:  DATA 6E,65
07C4:  DATA 78,69
07C6:  DATA F3,6E
07C8:  DATA 2E,2E
07CA:  DATA 2A,00
....................  
.................... #list 
....................  
....................  
.................... #use delay(clock=10000000) 
.................... #use rs232(baud=9600, xmit=PIN_C6,rcv=PIN_C7,bits=8,parity=N) 
.................... #fuses HS,NOPROTECT,NOWDT,NOLVP,CPUDIV1,nomclr 
.................... #define Tiempo 200 
....................  
.................... #use FAST_IO(A)  
.................... #use FAST_IO(B) 
.................... #use FAST_IO(D) 
....................  
.................... #byte T0CON=0xFD5 
.................... #byte wreg=0xFE8 
.................... #byte TOSU=0xFFF 
.................... #byte TOSH=0xFFE 
.................... #byte TOSL=0xFFD 
....................  
.................... int np=0; 
.................... int colap[6]; 
.................... int m,m1; 
.................... int8 i,j,j1,j2,j3,j4; 
....................  
.................... int c1,c2; 
.................... int k1,k2,k3,k4,k5,k6; 
.................... int l1,l2,l3,l4,l5,l6; 
....................  
.................... char proceso; 
....................  
.................... int const lenbuff=10; 
.................... int valor2=0; 
.................... int32 val1,val2,val3,val4,val5; 
.................... //int16 quantum=65048; 
....................  
....................  
.................... int   xbuff=0x00; 
.................... char  cbuff[lenbuff]; 
.................... char  rcvchar=0x00; 
.................... char  comando; 
.................... int1  flagcmd=0; 
....................  
....................  
.................... struct pcb{ 
.................... int32 di; 
.................... int32 df;  
.................... int32 da; 
.................... int estado;  
.................... int wreg;  
.................... int status; 
.................... int bsr; 
.................... int id; 
.................... int prioridad; 
.................... } vpcb[10]; 
....................  
.................... // ======== VARIABLES DEL CALENDARIO ========== \\ 
.................... // estado_calendario = 0 -->   No ejecutar  
.................... // estado_calendario = 1 -->   Ejecutar  
.................... // estado_calendario = 2 -->   Vacio 
.................... // estado_calendario = 3 -->   Cargando 
....................  
.................... int8 calendario[1000]; 
.................... int reloj = 0; 
.................... int estado_calendario = 0; 
.................... int prioridad_act = 0; 
.................... //========================= 
.................... int16 mcm=0; 
.................... //============================= 
....................  
....................  
.................... void activar_timer() 
.................... { 
....................    // set_timer0(65478);    //    para 3ms 
....................    // set_timer0(65438);    //    para 5ms 
....................    // set_timer0(65380);    //    para 8ms 
....................    // set_timer0(65341);    //    para 10ms 
....................    // set_timer0(65282);    //    para 13ms 
....................    // set_timer0(65243);    //    para 15ms 
....................    // set_timer0(65185);    //    para 18ms 
....................    // set_timer0(65146);    //    para 20ms 
....................     set_timer0(65048);    //    para 25ms 
*
074E:  MOVLW  FE
0750:  MOVWF  FD7
0752:  MOVLW  18
0754:  MOVWF  FD6
....................    // set_timer0(64950);    //    para 30ms 
....................    //set_timer0(quantum); 
....................    enable_interrupts(INT_TIMER0); 
0756:  BSF    FF2.5
0758:  RETURN 0
.................... } 
....................  
.................... void desactivar_timer() 
.................... { 
....................    disable_interrupts(INT_TIMER0); 
*
00A2:  BCF    FF2.5
00A4:  GOTO   00B0 (RETURN)
.................... } 
....................  
.................... void addcbuff(char c); 
.................... void mostrar_procesos(); 
.................... void descargar_proceso(int idp); 
.................... void Config_TMR0(); 
....................  
....................  
.................... #INT_TIMER0 
.................... void inter_quantum() 
00A8:  MOVLB  4
00AA:  CLRF   xFA
.................... {  int i=0; 
....................    desactivar_timer(); 
00AC:  MOVLB  0
00AE:  BRA    00A2
....................    output_toggle(PIN_D6); 
00B0:  BTG    F8C.6
....................    // Guardando variables 
....................    vpcb[colap[0]].wreg=wreg; 
00B2:  MOVF   17,W
00B4:  MULLW  12
00B6:  MOVF   FF3,W
00B8:  MOVLB  5
00BA:  CLRF   x01
00BC:  MOVWF  x00
00BE:  MOVLW  0D
00C0:  ADDWF  x00,W
00C2:  MOVWF  01
00C4:  MOVLW  00
00C6:  ADDWFC x01,W
00C8:  MOVWF  03
00CA:  MOVF   01,W
00CC:  ADDLW  57
00CE:  MOVWF  FE9
00D0:  MOVLW  00
00D2:  ADDWFC 03,W
00D4:  MOVWF  FEA
00D6:  MOVFF  FE8,FEF
....................    vpcb[colap[0]].da=(int32)TOSL; 
00DA:  MOVF   17,W
00DC:  MULLW  12
00DE:  MOVF   FF3,W
00E0:  CLRF   x01
00E2:  MOVWF  x00
00E4:  MOVLW  08
00E6:  ADDWF  x00,W
00E8:  MOVWF  01
00EA:  MOVLW  00
00EC:  ADDWFC x01,W
00EE:  MOVWF  03
00F0:  MOVF   01,W
00F2:  ADDLW  57
00F4:  MOVWF  FE9
00F6:  MOVLW  00
00F8:  ADDWFC 03,W
00FA:  MOVWF  FEA
00FC:  CLRF   01
00FE:  CLRF   02
0100:  CLRF   03
0102:  MOVFF  FFD,FEF
0106:  MOVFF  01,FEC
010A:  MOVFF  02,FEC
010E:  MOVFF  03,FEC
....................    vpcb[colap[0]].da=vpcb[colap[0]].da|((int32)TOSH<<8); 
0112:  MOVF   17,W
0114:  MULLW  12
0116:  MOVF   FF3,W
0118:  CLRF   x01
011A:  MOVWF  x00
011C:  MOVLW  08
011E:  ADDWF  x00,W
0120:  MOVWF  01
0122:  MOVLW  00
0124:  ADDWFC x01,W
0126:  MOVWF  03
0128:  MOVF   01,W
012A:  ADDLW  57
012C:  MOVWF  01
012E:  MOVLW  00
0130:  ADDWFC 03,F
0132:  MOVFF  01,500
0136:  MOVFF  03,501
013A:  MOVF   17,W
013C:  MULLW  12
013E:  MOVF   FF3,W
0140:  CLRF   x03
0142:  MOVWF  x02
0144:  MOVLW  08
0146:  ADDWF  x02,W
0148:  MOVWF  01
014A:  MOVLW  00
014C:  ADDWFC x03,W
014E:  MOVWF  03
0150:  MOVF   01,W
0152:  ADDLW  57
0154:  MOVWF  FE9
0156:  MOVLW  00
0158:  ADDWFC 03,W
015A:  MOVWF  FEA
015C:  MOVFF  FEF,502
0160:  MOVFF  FEC,503
0164:  MOVFF  FEC,504
0168:  MOVFF  FEC,505
016C:  CLRF   x08
016E:  CLRF   x07
0170:  CLRF   00
0172:  MOVF   00,W
0174:  IORWF  x02,W
0176:  MOVWF  00
0178:  MOVF   FFE,W
017A:  IORWF  x03,W
017C:  MOVWF  01
017E:  MOVF   x07,W
0180:  IORWF  x04,W
0182:  MOVWF  02
0184:  MOVF   x08,W
0186:  IORWF  x05,W
0188:  MOVFF  501,FEA
018C:  MOVFF  500,FE9
0190:  MOVFF  00,FEF
0194:  MOVFF  01,FEC
0198:  MOVFF  02,FEC
019C:  MOVWF  FEC
....................    vpcb[colap[0]].da=vpcb[colap[0]].da|((int32)TOSU<<16); 
019E:  MOVF   17,W
01A0:  MULLW  12
01A2:  MOVF   FF3,W
01A4:  CLRF   x01
01A6:  MOVWF  x00
01A8:  MOVLW  08
01AA:  ADDWF  x00,W
01AC:  MOVWF  01
01AE:  MOVLW  00
01B0:  ADDWFC x01,W
01B2:  MOVWF  03
01B4:  MOVF   01,W
01B6:  ADDLW  57
01B8:  MOVWF  01
01BA:  MOVLW  00
01BC:  ADDWFC 03,F
01BE:  MOVFF  01,500
01C2:  MOVFF  03,501
01C6:  MOVF   17,W
01C8:  MULLW  12
01CA:  MOVF   FF3,W
01CC:  CLRF   x03
01CE:  MOVWF  x02
01D0:  MOVLW  08
01D2:  ADDWF  x02,W
01D4:  MOVWF  01
01D6:  MOVLW  00
01D8:  ADDWFC x03,W
01DA:  MOVWF  03
01DC:  MOVF   01,W
01DE:  ADDLW  57
01E0:  MOVWF  FE9
01E2:  MOVLW  00
01E4:  ADDWFC 03,W
01E6:  MOVWF  FEA
01E8:  MOVFF  FEF,502
01EC:  MOVFF  FEC,503
01F0:  MOVFF  FEC,504
01F4:  MOVFF  FEC,505
01F8:  CLRF   x07
01FA:  CLRF   00
01FC:  CLRF   01
01FE:  MOVF   00,W
0200:  IORWF  x02,W
0202:  MOVWF  00
0204:  MOVF   01,W
0206:  IORWF  x03,W
0208:  MOVWF  01
020A:  MOVF   FFF,W
020C:  IORWF  x04,W
020E:  MOVWF  02
0210:  MOVF   x07,W
0212:  IORWF  x05,W
0214:  MOVFF  501,FEA
0218:  MOVFF  500,FE9
021C:  MOVFF  00,FEF
0220:  MOVFF  01,FEC
0224:  MOVFF  02,FEC
0228:  MOVWF  FEC
....................     
....................    // corriendo proceso 
....................    if(np>1) 
022A:  MOVF   16,W
022C:  SUBLW  01
022E:  BTFSC  FD8.0
0230:  BRA    032C
....................    {    
....................       prioridad_act = 0; 
0232:  MOVLB  4
0234:  CLRF   xF5
....................       for (i=1; i<np; i++ ){ 
0236:  MOVLW  01
0238:  MOVWF  xFA
023A:  MOVF   16,W
023C:  SUBWF  xFA,W
023E:  BC    02BA
....................          if (vpcb[colap[i]].prioridad > prioridad_act){ 
0240:  CLRF   03
0242:  MOVF   xFA,W
0244:  ADDLW  17
0246:  MOVWF  FE9
0248:  MOVLW  00
024A:  ADDWFC 03,W
024C:  MOVWF  FEA
024E:  MOVF   FEF,W
0250:  MULLW  12
0252:  MOVF   FF3,W
0254:  MOVLB  5
0256:  CLRF   x01
0258:  MOVWF  x00
025A:  MOVLW  11
025C:  ADDWF  x00,W
025E:  MOVWF  01
0260:  MOVLW  00
0262:  ADDWFC x01,W
0264:  MOVWF  03
0266:  MOVF   01,W
0268:  ADDLW  57
026A:  MOVWF  FE9
026C:  MOVLW  00
026E:  ADDWFC 03,W
0270:  MOVWF  FEA
0272:  MOVF   FEF,W
0274:  MOVLB  4
0276:  SUBWF  xF5,W
0278:  BC    02B6
....................             m1 = i; 
027A:  MOVFF  4FA,1E
....................             prioridad_act = vpcb[colap[i]].prioridad; 
027E:  CLRF   03
0280:  MOVF   xFA,W
0282:  ADDLW  17
0284:  MOVWF  FE9
0286:  MOVLW  00
0288:  ADDWFC 03,W
028A:  MOVWF  FEA
028C:  MOVF   FEF,W
028E:  MULLW  12
0290:  MOVF   FF3,W
0292:  MOVLB  5
0294:  CLRF   x01
0296:  MOVWF  x00
0298:  MOVLW  11
029A:  ADDWF  x00,W
029C:  MOVWF  01
029E:  MOVLW  00
02A0:  ADDWFC x01,W
02A2:  MOVWF  03
02A4:  MOVF   01,W
02A6:  ADDLW  57
02A8:  MOVWF  FE9
02AA:  MOVLW  00
02AC:  ADDWFC 03,W
02AE:  MOVWF  FEA
02B0:  MOVFF  FEF,4F5
02B4:  MOVLB  4
....................          } 
02B6:  INCF   xFA,F
02B8:  BRA    023A
....................       } 
....................        
....................       m=colap[0]; 
02BA:  MOVFF  17,1D
....................       colap[0] = colap[m1]; 
02BE:  CLRF   03
02C0:  MOVF   1E,W
02C2:  ADDLW  17
02C4:  MOVWF  FE9
02C6:  MOVLW  00
02C8:  ADDWFC 03,W
02CA:  MOVWF  FEA
02CC:  MOVFF  FEF,17
....................       for(i=m1;i<np-1;i++) 
02D0:  MOVFF  1E,4FA
02D4:  MOVLW  01
02D6:  SUBWF  16,W
02D8:  SUBWF  xFA,W
02DA:  BC    0316
....................       { 
....................          colap[i]=colap[i+1]; 
02DC:  CLRF   03
02DE:  MOVF   xFA,W
02E0:  ADDLW  17
02E2:  MOVWF  01
02E4:  MOVLW  00
02E6:  ADDWFC 03,F
02E8:  MOVFF  03,501
02EC:  MOVLW  01
02EE:  MOVLB  4
02F0:  ADDWF  xFA,W
02F2:  CLRF   03
02F4:  ADDLW  17
02F6:  MOVWF  FE9
02F8:  MOVLW  00
02FA:  ADDWFC 03,W
02FC:  MOVWF  FEA
02FE:  MOVFF  FEF,502
0302:  MOVLB  5
0304:  MOVFF  501,FEA
0308:  MOVFF  01,FE9
030C:  MOVFF  502,FEF
0310:  MOVLB  4
0312:  INCF   xFA,F
0314:  BRA    02D4
....................       } 
....................       colap[np-1]=m; 
0316:  MOVLW  01
0318:  SUBWF  16,W
031A:  CLRF   03
031C:  ADDLW  17
031E:  MOVWF  FE9
0320:  MOVLW  00
0322:  ADDWFC 03,W
0324:  MOVWF  FEA
0326:  MOVFF  1D,FEF
032A:  MOVLB  5
....................    } 
....................     
....................    if(estado_calendario == 1){ 
032C:  MOVLB  4
032E:  DECFSZ xF4,W
0330:  BRA    0340
....................       reloj++; 
0332:  INCF   xF3,F
....................       if(reloj == mcm){ 
0334:  MOVF   xF6,W
0336:  SUBWF  xF3,W
0338:  BNZ   0340
033A:  MOVF   xF7,F
033C:  BNZ   0340
....................          reloj = 0; 
033E:  CLRF   xF3
....................       } 
....................    } 
....................     
....................    //==== PC=S0_Init() ======= 
....................    TOSL=00; 
0340:  CLRF   FFD
....................    TOSH=40; 
0342:  MOVLW  28
0344:  MOVWF  FFE
....................    TOSU=00; 
0346:  CLRF   FFF
0348:  BCF    FF2.2
034A:  MOVLB  0
034C:  GOTO   0060
.................... }  
....................  
.................... void inte_Init()  // interrupcion de puerto serial 
.................... { 
....................    enable_interrupts(GLOBAL); 
*
088C:  MOVLW  C0
088E:  IORWF  FF2,F
....................    enable_interrupts(INT_RDA); 
0890:  BSF    F9D.5
0892:  GOTO   08AE (RETURN)
.................... } 
....................  
....................  
.................... #INT_RDA 
.................... void serial_isr() 
.................... { 
....................    //printf("Recibido");     // se envia por Serial una palabra para verificar interrupcion 
....................    rcvchar = 0x00; 
*
038C:  CLRF   54
....................    rcvchar = getc();    // se recibe el caracter enviado por la computadora 
038E:  BTFSS  F9E.5
0390:  BRA    038E
0392:  MOVFF  FAE,54
....................    addcbuff(rcvchar);   // guarda el caracter en un buffer 
0396:  MOVFF  54,4FA
039A:  BRA    0350
039C:  BCF    F9E.5
039E:  GOTO   0060
.................... } 
....................  
.................... void addcbuff(char c)    
.................... { 
....................    switch(c) 
*
0350:  MOVLB  4
0352:  MOVF   xFA,W
0354:  XORLW  2A
0356:  MOVLB  0
0358:  BZ    035C
035A:  BRA    0374
....................    { 
....................       case '*':                  // en caso de recibir *, levanta el flag para saber que se termino de enviar un comando. 
....................          cbuff[xbuff++] = c; 
035C:  MOVF   49,W
035E:  INCF   49,F
0360:  CLRF   03
0362:  ADDLW  4A
0364:  MOVWF  FE9
0366:  MOVLW  00
0368:  ADDWFC 03,W
036A:  MOVWF  FEA
036C:  MOVFF  4FA,FEF
....................          flagcmd = 1; 
0370:  BSF    56.0
....................       break; 
0372:  BRA    0388
....................       default: 
....................          cbuff[xbuff++] = c; 
0374:  MOVF   49,W
0376:  INCF   49,F
0378:  CLRF   03
037A:  ADDLW  4A
037C:  MOVWF  FE9
037E:  MOVLW  00
0380:  ADDWFC 03,W
0382:  MOVWF  FEA
0384:  MOVFF  4FA,FEF
....................    } 
0388:  GOTO   039C (RETURN)
.................... } 
....................  
.................... void inicbuff(void)           // inicializa el buffer, limpiandolo 
.................... { 
....................    int i; 
....................    for (i=0; i<lenbuff;i++)       
*
03BA:  MOVLB  5
03BC:  CLRF   x13
03BE:  MOVF   x13,W
03C0:  SUBLW  09
03C2:  BNC   03D8
....................    { 
....................       cbuff[i] = 0x00; 
03C4:  CLRF   03
03C6:  MOVF   x13,W
03C8:  ADDLW  4A
03CA:  MOVWF  FE9
03CC:  MOVLW  00
03CE:  ADDWFC 03,W
03D0:  MOVWF  FEA
03D2:  CLRF   FEF
03D4:  INCF   x13,F
03D6:  BRA    03BE
....................    } 
....................    xbuff=0x00; 
03D8:  CLRF   49
03DA:  MOVLB  0
03DC:  GOTO   048E (RETURN)
.................... } 
....................  
....................  
.................... void procesa_cmd(void){             // procesa el ultimo comando guardado, un comando esta comprendido entre $ hasta *  
03E0:  MOVLB  5
03E2:  CLRF   x08
....................   
....................    int i, j=0;                       
....................    char salida[lenbuff];            // Argumento de comando (si lo tiene) 
....................    disable_interrupts(int_rda);      
03E4:  BCF    F9D.5
....................    flagcmd=0;                       // Desactivo flag de comando pendiente. 
03E6:  BCF    56.0
....................    for (i=0;i<xbuff;i++) 
03E8:  CLRF   x07
03EA:  MOVF   49,W
03EC:  SUBWF  x07,W
03EE:  BC    048A
....................    { 
....................       if (cbuff[i] == '$'){         // verifica que tenga '$' 
03F0:  CLRF   03
03F2:  MOVF   x07,W
03F4:  ADDLW  4A
03F6:  MOVWF  FE9
03F8:  MOVLW  00
03FA:  ADDWFC 03,W
03FC:  MOVWF  FEA
03FE:  MOVF   FEF,W
0400:  SUBLW  24
0402:  BNZ   0486
....................          while((cbuff[i] != '*') & (i<xbuff))   // hasta que encuentre * 
0404:  CLRF   03
0406:  MOVF   x07,W
0408:  ADDLW  4A
040A:  MOVWF  FE9
040C:  MOVLW  00
040E:  ADDWFC 03,W
0410:  MOVWF  FEA
0412:  MOVF   FEF,W
0414:  SUBLW  2A
0416:  BNZ   041C
0418:  MOVLW  00
041A:  BRA    041E
041C:  MOVLW  01
041E:  MOVWF  x13
0420:  MOVF   49,W
0422:  SUBWF  x07,W
0424:  BNC   042A
0426:  MOVLW  00
0428:  BRA    042C
042A:  MOVLW  01
042C:  ANDWF  x13,W
042E:  BZ    0468
....................          { 
....................             salida[j++]=cbuff[i++]; 
0430:  MOVF   x08,W
0432:  INCF   x08,F
0434:  CLRF   03
0436:  ADDLW  09
0438:  MOVWF  01
043A:  MOVLW  05
043C:  ADDWFC 03,F
043E:  MOVFF  01,513
0442:  MOVFF  03,514
0446:  MOVF   x07,W
0448:  INCF   x07,F
044A:  CLRF   03
044C:  ADDLW  4A
044E:  MOVWF  FE9
0450:  MOVLW  00
0452:  ADDWFC 03,W
0454:  MOVWF  FEA
0456:  MOVFF  FEF,515
045A:  MOVFF  514,FEA
045E:  MOVFF  01,FE9
0462:  MOVFF  515,FEF
0466:  BRA    0404
....................          } 
....................          comando = salida[1]; 
0468:  MOVFF  50A,55
....................          valor2 = salida[2] -'0'; 
046C:  MOVLW  30
046E:  SUBWF  x0B,W
0470:  MOVWF  34
....................          val1 = salida[2]; 
0472:  CLRF   38
0474:  CLRF   37
0476:  CLRF   36
0478:  MOVFF  50B,35
....................          val2 = salida[3]; 
047C:  CLRF   3C
047E:  CLRF   3B
0480:  CLRF   3A
0482:  MOVFF  50C,39
....................           
....................       } 
0486:  INCF   x07,F
0488:  BRA    03EA
....................    } 
....................    inicbuff();                            // Borro buffer. 
048A:  MOVLB  0
048C:  BRA    03BA
....................    for(i=0;i<lenbuff;i++)                 // Bucle que pone a 0 todos los 
048E:  MOVLB  5
0490:  CLRF   x07
0492:  MOVF   x07,W
0494:  SUBLW  09
0496:  BNC   04AC
....................    { 
....................       salida[i]=0x00;                     // caracteres en el argumento 
0498:  CLRF   03
049A:  MOVF   x07,W
049C:  ADDLW  09
049E:  MOVWF  FE9
04A0:  MOVLW  05
04A2:  ADDWFC 03,W
04A4:  MOVWF  FEA
04A6:  CLRF   FEF
04A8:  INCF   x07,F
04AA:  BRA    0492
....................    } 
....................    enable_interrupts(int_rda);             
04AC:  BSF    F9D.5
04AE:  MOVLB  0
04B0:  GOTO   4008 (RETURN)
.................... } 
....................  
....................  
.................... //***************************************************************************** 
.................... //PROGRAMA 1: Parpadeo Led D0 
....................  
.................... #ORG 0x1000, 0x1044 
.................... void Parpadear_D0() 
.................... { 
....................    while(TRUE) 
....................    { 
....................       output_toggle(PIN_D0); 
*
1000:  BTG    F8C.0
....................       for (k1=1;k1<170;++k1){for (l1=1;l1<170;++l1){}} 
1002:  MOVLW  01
1004:  MOVWF  27
1006:  MOVF   27,W
1008:  SUBLW  A9
100A:  BNC   101E
100C:  MOVLW  01
100E:  MOVWF  2D
1010:  MOVF   2D,W
1012:  SUBLW  A9
1014:  BNC   101A
1016:  INCF   2D,F
1018:  BRA    1010
101A:  INCF   27,F
101C:  BRA    1006
....................       output_toggle(PIN_D0); 
101E:  BTG    F8C.0
....................       for (k1=1;k1<170;++k1){for (l1=1;l1<170;++l1){}} 
1020:  MOVLW  01
1022:  MOVWF  27
1024:  MOVF   27,W
1026:  SUBLW  A9
1028:  BNC   103C
102A:  MOVLW  01
102C:  MOVWF  2D
102E:  MOVF   2D,W
1030:  SUBLW  A9
1032:  BNC   1038
1034:  INCF   2D,F
1036:  BRA    102E
1038:  INCF   27,F
103A:  BRA    1024
103C:  BRA    1000
....................    } 
103E:  RETURN 0
.................... } 
....................  
.................... //***************************************************************************** 
.................... //PROGRAMA 2: Parpadeo Led D1 
....................  
.................... #ORG 0x1046, 0x1090        
.................... void Parpadear_D1() 
.................... { 
....................    while(TRUE) 
....................    { 
....................       output_toggle(PIN_D1); 
*
1046:  BTG    F8C.1
....................       for (k1=1;k1<170;++k1){for (l1=1;l1<170;++l1){}} 
1048:  MOVLW  01
104A:  MOVWF  27
104C:  MOVF   27,W
104E:  SUBLW  A9
1050:  BNC   1064
1052:  MOVLW  01
1054:  MOVWF  2D
1056:  MOVF   2D,W
1058:  SUBLW  A9
105A:  BNC   1060
105C:  INCF   2D,F
105E:  BRA    1056
1060:  INCF   27,F
1062:  BRA    104C
....................       output_toggle(PIN_D1); 
1064:  BTG    F8C.1
....................       for (k1=1;k1<170;++k1){for (l1=1;l1<170;++l1){}} 
1066:  MOVLW  01
1068:  MOVWF  27
106A:  MOVF   27,W
106C:  SUBLW  A9
106E:  BNC   1082
1070:  MOVLW  01
1072:  MOVWF  2D
1074:  MOVF   2D,W
1076:  SUBLW  A9
1078:  BNC   107E
107A:  INCF   2D,F
107C:  BRA    1074
107E:  INCF   27,F
1080:  BRA    106A
1082:  BRA    1046
....................    } 
1084:  RETURN 0
.................... } 
....................  
.................... //***************************************************************************** 
.................... //PROGRAMA 3: Parpadeo Led D2 
....................  
.................... #ORG 0x1092, 0x10D6 
.................... void Parpadear_D2() 
.................... { 
....................    while(TRUE) 
....................    { 
....................       output_toggle(PIN_D2); 
*
1092:  BTG    F8C.2
....................       for (k1=1;k1<170;++k1){for (l1=1;l1<170;++l1){}} 
1094:  MOVLW  01
1096:  MOVWF  27
1098:  MOVF   27,W
109A:  SUBLW  A9
109C:  BNC   10B0
109E:  MOVLW  01
10A0:  MOVWF  2D
10A2:  MOVF   2D,W
10A4:  SUBLW  A9
10A6:  BNC   10AC
10A8:  INCF   2D,F
10AA:  BRA    10A2
10AC:  INCF   27,F
10AE:  BRA    1098
....................       output_toggle(PIN_D2); 
10B0:  BTG    F8C.2
....................       for (k1=1;k1<170;++k1){for (l1=1;l1<170;++l1){}} 
10B2:  MOVLW  01
10B4:  MOVWF  27
10B6:  MOVF   27,W
10B8:  SUBLW  A9
10BA:  BNC   10CE
10BC:  MOVLW  01
10BE:  MOVWF  2D
10C0:  MOVF   2D,W
10C2:  SUBLW  A9
10C4:  BNC   10CA
10C6:  INCF   2D,F
10C8:  BRA    10C0
10CA:  INCF   27,F
10CC:  BRA    10B6
10CE:  BRA    1092
....................    } 
10D0:  RETURN 0
.................... } 
....................  
.................... //***************************************************************************** 
.................... //PROGRAMA 4: Parpadeo Led D3 - FINITO 
....................  
.................... #ORG 0x10D8, 0x1128 
.................... void Parpadear_D3() 
.................... { 
....................    while(TRUE) 
....................    { 
....................       output_toggle(PIN_D3); 
*
10D8:  BTG    F8C.3
....................       for (k1=1;k1<170;++k1){for (l1=1;l1<170;++l1){}} 
10DA:  MOVLW  01
10DC:  MOVWF  27
10DE:  MOVF   27,W
10E0:  SUBLW  A9
10E2:  BNC   10F6
10E4:  MOVLW  01
10E6:  MOVWF  2D
10E8:  MOVF   2D,W
10EA:  SUBLW  A9
10EC:  BNC   10F2
10EE:  INCF   2D,F
10F0:  BRA    10E8
10F2:  INCF   27,F
10F4:  BRA    10DE
....................       output_toggle(PIN_D3); 
10F6:  BTG    F8C.3
....................       for (k1=1;k1<170;++k1){for (l1=1;l1<170;++l1){}} 
10F8:  MOVLW  01
10FA:  MOVWF  27
10FC:  MOVF   27,W
10FE:  SUBLW  A9
1100:  BNC   1114
1102:  MOVLW  01
1104:  MOVWF  2D
1106:  MOVF   2D,W
1108:  SUBLW  A9
110A:  BNC   1110
110C:  INCF   2D,F
110E:  BRA    1106
1110:  INCF   27,F
1112:  BRA    10FC
....................       comando = 'D'; 
1114:  MOVLW  44
1116:  MOVWF  55
....................       valor2 = 4; 
1118:  MOVLW  04
111A:  MOVWF  34
111C:  BRA    10D8
....................    } 
111E:  RETURN 0
.................... } 
....................  
.................... //***************************************************************************** 
.................... //PROGRAMA 5: Parpadeo Led D4 - FINITO 
....................  
.................... #ORG 0x112A, 0x117A 
.................... void Parpadear_D4() 
.................... { 
....................    while(TRUE) 
....................    { 
....................       output_toggle(PIN_D4); 
*
112A:  BTG    F8C.4
....................       for (k1=1;k1<170;++k1){for (l1=1;l1<170;++l1){}} 
112C:  MOVLW  01
112E:  MOVWF  27
1130:  MOVF   27,W
1132:  SUBLW  A9
1134:  BNC   1148
1136:  MOVLW  01
1138:  MOVWF  2D
113A:  MOVF   2D,W
113C:  SUBLW  A9
113E:  BNC   1144
1140:  INCF   2D,F
1142:  BRA    113A
1144:  INCF   27,F
1146:  BRA    1130
....................       output_toggle(PIN_D4); 
1148:  BTG    F8C.4
....................       for (k1=1;k1<170;++k1){for (l1=1;l1<170;++l1){}} 
114A:  MOVLW  01
114C:  MOVWF  27
114E:  MOVF   27,W
1150:  SUBLW  A9
1152:  BNC   1166
1154:  MOVLW  01
1156:  MOVWF  2D
1158:  MOVF   2D,W
115A:  SUBLW  A9
115C:  BNC   1162
115E:  INCF   2D,F
1160:  BRA    1158
1162:  INCF   27,F
1164:  BRA    114E
....................       comando = 'D'; 
1166:  MOVLW  44
1168:  MOVWF  55
....................       valor2 = 5; 
116A:  MOVLW  05
116C:  MOVWF  34
116E:  BRA    112A
....................    } 
1170:  RETURN 0
.................... } 
....................  
....................  
.................... //***************************************************************************** 
.................... //PROGRAMA 6: Parpadeo Led D5 - FINITO 
....................  
.................... #ORG 0x11F6, 0x12CC 
.................... void Parpadear_D5() 
.................... { 
....................    while(TRUE) 
....................    { 
....................       output_toggle(PIN_D5); 
*
11F6:  BTG    F8C.5
....................       for (k1=1;k1<170;++k1){for (l1=1;l1<170;++l1){}} 
11F8:  MOVLW  01
11FA:  MOVWF  27
11FC:  MOVF   27,W
11FE:  SUBLW  A9
1200:  BNC   1214
1202:  MOVLW  01
1204:  MOVWF  2D
1206:  MOVF   2D,W
1208:  SUBLW  A9
120A:  BNC   1210
120C:  INCF   2D,F
120E:  BRA    1206
1210:  INCF   27,F
1212:  BRA    11FC
....................       output_toggle(PIN_D5); 
1214:  BTG    F8C.5
....................       for (k1=1;k1<170;++k1){for (l1=1;l1<170;++l1){}} 
1216:  MOVLW  01
1218:  MOVWF  27
121A:  MOVF   27,W
121C:  SUBLW  A9
121E:  BNC   1232
1220:  MOVLW  01
1222:  MOVWF  2D
1224:  MOVF   2D,W
1226:  SUBLW  A9
1228:  BNC   122E
122A:  INCF   2D,F
122C:  BRA    1224
122E:  INCF   27,F
1230:  BRA    121A
....................       comando = 'D'; 
1232:  MOVLW  44
1234:  MOVWF  55
....................       valor2 = 6; 
1236:  MOVLW  06
1238:  MOVWF  34
123A:  BRA    11F6
....................    } 
123C:  RETURN 0
.................... } 
....................  
....................  
.................... /* 
.................... // PROGRAMA 5: Mostrar Procesos 
....................  
.................... #ORG 0x2502, 0x2850           // COMANDO: $C4* 
.................... void task_manager(){ 
....................    while(TRUE){ 
....................       desactivar_timer(); 
....................       int m; 
....................          int32 mproceso, mdirini, mdirfin, mdiract; 
....................          printf("|   Proceso  |  Dir.Ini  |  Dir.Fin  |  Dir.Act  |"); 
....................          for(m=0;m<np;m++) 
....................          { 
....................             mproceso = colap[m]+1; 
....................             mdirini = vpcb[mproceso-1].di; 
....................             mdirfin = vpcb[mproceso-1].df; 
....................             mdiract = vpcb[mproceso-1].da; 
....................             printf("|      %Lu     |   %Lu    |   %Lu    |   %Lu    |",mproceso,mdirini,mdirfin,mdiract); 
....................          } 
....................          printf("*"); 
....................       activar_timer(); 
....................       comando='D'; 
....................       valor2=5; 
....................       int16 mm; 
....................       for (mm=0;mm<250;mm++) 
....................       { 
....................          int mmm; 
....................          for (mmm=0;mmm<250;mmm++) 
....................          { 
....................             mm=mm+1; 
....................             mm=mm-1; 
....................          } 
....................       } 
....................    } 
....................     
.................... } 
.................... */ 
....................  
.................... void limpiar_calendario (int mcm){ 
....................    for (int i=0; i<mcm; i++){ 
*
061C:  MOVLB  5
061E:  CLRF   x08
0620:  MOVF   x07,W
0622:  SUBWF  x08,W
0624:  BC    063A
....................       Calendario[i] = 0; 
0626:  MOVLW  0B
0628:  ADDWF  x08,W
062A:  MOVWF  FE9
062C:  MOVLW  01
062E:  MOVWF  FEA
0630:  BTFSC  FD8.0
0632:  INCF   FEA,F
0634:  CLRF   FEF
0636:  INCF   x08,F
0638:  BRA    0620
....................    } 
063A:  MOVLB  0
063C:  GOTO   40B8 (RETURN)
.................... } 
....................  
.................... void cargar_proceso(int idp, int prioridad) 
.................... { 
....................     colap[np]=idp-1; 
*
04B4:  CLRF   03
04B6:  MOVF   16,W
04B8:  ADDLW  17
04BA:  MOVWF  FE9
04BC:  MOVLW  00
04BE:  ADDWFC 03,W
04C0:  MOVWF  FEA
04C2:  MOVLW  01
04C4:  MOVLB  5
04C6:  SUBWF  x08,W
04C8:  MOVWF  FEF
....................     vpcb[idp-1].estado=1; 
04CA:  MOVLW  01
04CC:  SUBWF  x08,W
04CE:  MULLW  12
04D0:  MOVF   FF3,W
04D2:  CLRF   x0B
04D4:  MOVWF  x0A
04D6:  MOVLW  0C
04D8:  ADDWF  x0A,W
04DA:  MOVWF  01
04DC:  MOVLW  00
04DE:  ADDWFC x0B,W
04E0:  MOVWF  03
04E2:  MOVF   01,W
04E4:  ADDLW  57
04E6:  MOVWF  FE9
04E8:  MOVLW  00
04EA:  ADDWFC 03,W
04EC:  MOVWF  FEA
04EE:  MOVLW  01
04F0:  MOVWF  FEF
....................     vpcb[idp-1].prioridad =prioridad; 
04F2:  SUBWF  x08,W
04F4:  MULLW  12
04F6:  MOVF   FF3,W
04F8:  CLRF   x0B
04FA:  MOVWF  x0A
04FC:  MOVLW  11
04FE:  ADDWF  x0A,W
0500:  MOVWF  01
0502:  MOVLW  00
0504:  ADDWFC x0B,W
0506:  MOVWF  03
0508:  MOVF   01,W
050A:  ADDLW  57
050C:  MOVWF  FE9
050E:  MOVLW  00
0510:  ADDWFC 03,W
0512:  MOVWF  FEA
0514:  MOVFF  509,FEF
....................     proceso=10; 
0518:  MOVLW  0A
051A:  MOVWF  33
....................     np++; 
051C:  INCF   16,F
051E:  MOVLB  0
0520:  RETURN 0
.................... } 
....................  
.................... void descargar_proceso(int idp) 
.................... { 
....................    int s,d,f; 
....................    for(s=0;s<np;s++) 
0522:  MOVLB  5
0524:  CLRF   x08
0526:  MOVF   16,W
0528:  SUBWF  x08,W
052A:  BC    054E
....................       {if(colap[s]==idp-1) 
052C:  CLRF   03
052E:  MOVF   x08,W
0530:  ADDLW  17
0532:  MOVWF  FE9
0534:  MOVLW  00
0536:  ADDWFC 03,W
0538:  MOVWF  FEA
053A:  MOVFF  FEF,50B
053E:  MOVLW  01
0540:  SUBWF  x07,W
0542:  SUBWF  x0B,W
0544:  BNZ   054A
....................          {d=s;} 
0546:  MOVFF  508,509
054A:  INCF   x08,F
054C:  BRA    0526
....................       } 
....................    f=np-1; 
054E:  MOVLW  01
0550:  SUBWF  16,W
0552:  MOVWF  x0A
....................    for(s=d;s<f;s++) 
0554:  MOVFF  509,508
0558:  MOVF   x0A,W
055A:  SUBWF  x08,W
055C:  BC    0592
....................       {colap[s]=colap[s+1]; 
055E:  CLRF   03
0560:  MOVF   x08,W
0562:  ADDLW  17
0564:  MOVWF  01
0566:  MOVLW  00
0568:  ADDWFC 03,F
056A:  MOVFF  03,50C
056E:  MOVLW  01
0570:  ADDWF  x08,W
0572:  CLRF   03
0574:  ADDLW  17
0576:  MOVWF  FE9
0578:  MOVLW  00
057A:  ADDWFC 03,W
057C:  MOVWF  FEA
057E:  MOVFF  FEF,50D
0582:  MOVFF  50C,FEA
0586:  MOVFF  01,FE9
058A:  MOVFF  50D,FEF
058E:  INCF   x08,F
0590:  BRA    0558
....................       } 
....................    np--;    
0592:  DECF   16,F
....................    vpcb[idp-1].estado=0; 
0594:  MOVLW  01
0596:  SUBWF  x07,W
0598:  MULLW  12
059A:  MOVF   FF3,W
059C:  CLRF   x0C
059E:  MOVWF  x0B
05A0:  MOVLW  0C
05A2:  ADDWF  x0B,W
05A4:  MOVWF  01
05A6:  MOVLW  00
05A8:  ADDWFC x0C,W
05AA:  MOVWF  03
05AC:  MOVF   01,W
05AE:  ADDLW  57
05B0:  MOVWF  FE9
05B2:  MOVLW  00
05B4:  ADDWFC 03,W
05B6:  MOVWF  FEA
05B8:  CLRF   FEF
....................    proceso=0; 
05BA:  CLRF   33
05BC:  MOVLB  0
05BE:  RETURN 0
.................... } 
....................  
.................... void Port_Init() 
.................... { 
....................    set_tris_b(0x00); 
*
07CC:  MOVLW  00
07CE:  MOVWF  F93
....................    set_tris_d(0x00); 
07D0:  MOVWF  F95
....................    set_tris_a(0x00); 
07D2:  MOVWF  F92
....................    output_b(0x00); 
07D4:  CLRF   F8A
....................    output_d(0x00); 
07D6:  CLRF   F8C
....................    output_a(0x00); 
07D8:  CLRF   F89
07DA:  GOTO   08AA (RETURN)
.................... } 
....................  
.................... void Config_TMR0() 
.................... { 
....................    T0CON=0b10000111; 
*
0896:  MOVLW  87
0898:  MOVWF  FD5
089A:  GOTO   08B0 (RETURN)
....................  
.................... } 
....................  
.................... void Procesos_Init() 
.................... { 
....................    vpcb[0].di=0x1000; 
*
07DE:  CLRF   5A
07E0:  CLRF   59
07E2:  MOVLW  10
07E4:  MOVWF  58
07E6:  CLRF   57
....................    vpcb[0].da=0x1000;    
07E8:  CLRF   x62
07EA:  CLRF   x61
07EC:  MOVWF  x60
07EE:  CLRF   5F
....................    vpcb[0].df=0x1100; 
07F0:  CLRF   5E
07F2:  CLRF   5D
07F4:  MOVLW  11
07F6:  MOVWF  5C
07F8:  CLRF   5B
....................    vpcb[1].di=0x1102; 
07FA:  CLRF   x6C
07FC:  CLRF   x6B
07FE:  MOVWF  x6A
0800:  MOVLW  02
0802:  MOVWF  x69
....................    vpcb[1].da=0x1102; 
0804:  CLRF   x74
0806:  CLRF   x73
0808:  MOVLW  11
080A:  MOVWF  x72
080C:  MOVLW  02
080E:  MOVWF  x71
....................    vpcb[1].df=0x1200; 
0810:  CLRF   x70
0812:  CLRF   x6F
0814:  MOVLW  12
0816:  MOVWF  x6E
0818:  CLRF   x6D
....................    vpcb[2].di=0x1202; 
081A:  CLRF   x7E
081C:  CLRF   x7D
081E:  MOVWF  x7C
0820:  MOVLW  02
0822:  MOVWF  x7B
....................    vpcb[2].da=0x1202; 
0824:  CLRF   x86
0826:  CLRF   x85
0828:  MOVLW  12
082A:  MOVWF  x84
082C:  MOVLW  02
082E:  MOVWF  x83
....................    vpcb[2].df=0x1300; 
0830:  CLRF   x82
0832:  CLRF   x81
0834:  MOVLW  13
0836:  MOVWF  x80
0838:  CLRF   x7F
....................    vpcb[3].di=0x1302; 
083A:  CLRF   x90
083C:  CLRF   x8F
083E:  MOVWF  x8E
0840:  MOVLW  02
0842:  MOVWF  x8D
....................    vpcb[3].da=0x1302; 
0844:  CLRF   x98
0846:  CLRF   x97
0848:  MOVLW  13
084A:  MOVWF  x96
084C:  MOVLW  02
084E:  MOVWF  x95
....................    vpcb[3].df=0x1400; 
0850:  CLRF   x94
0852:  CLRF   x93
0854:  MOVLW  14
0856:  MOVWF  x92
0858:  CLRF   x91
....................    vpcb[4].di=0x2502; 
085A:  CLRF   xA2
085C:  CLRF   xA1
085E:  MOVLW  25
0860:  MOVWF  xA0
0862:  MOVLW  02
0864:  MOVWF  x9F
....................    vpcb[4].da=0x2502; 
0866:  CLRF   xAA
0868:  CLRF   xA9
086A:  MOVLW  25
086C:  MOVWF  xA8
086E:  MOVLW  02
0870:  MOVWF  xA7
....................    vpcb[4].df=0x2850; 
0872:  CLRF   xA6
0874:  CLRF   xA5
0876:  MOVLW  28
0878:  MOVWF  xA4
087A:  MOVLW  50
087C:  MOVWF  xA3
....................    vpcb[0].estado=0; 
087E:  CLRF   x63
....................    vpcb[1].estado=0; 
0880:  CLRF   x75
....................    vpcb[2].estado=0; 
0882:  CLRF   x87
....................    vpcb[3].estado=0; 
0884:  CLRF   x99
....................    vpcb[4].estado=0; 
0886:  CLRF   xAB
0888:  GOTO   08AC (RETURN)
....................     
.................... } 
....................  
.................... void MCU_Init() 
.................... { 
....................    printf("Conectado.............*"); 
*
089E:  MOVLW  A2
08A0:  MOVWF  FF6
08A2:  MOVLW  03
08A4:  MOVWF  FF7
08A6:  RCALL  0640
....................    Port_Init(); 
08A8:  BRA    07CC
....................    Procesos_Init(); 
08AA:  BRA    07DE
....................    inte_Init(); 
08AC:  BRA    088C
....................    Config_TMR0(); 
08AE:  BRA    0896
....................    setup_spi(FALSE); 
08B0:  CLRF   FC6
....................    setup_psp(PSP_DISABLED); 
08B2:  BCF    F96.4
....................    setup_comparator(NC_NC_NC_NC); 
08B4:  MOVLW  07
08B6:  MOVWF  FB4
08B8:  MOVF   F92,W
08BA:  MOVWF  F92
08BC:  MOVLW  07
08BE:  MOVWF  00
08C0:  DECFSZ 00,F
08C2:  BRA    08C0
08C4:  BRA    08C6
08C6:  NOP   
08C8:  MOVF   FB4,W
08CA:  BCF    FA1.6
....................    setup_vref(FALSE); 
08CC:  CLRF   FB5
....................    port_b_pullups(FALSE); 
08CE:  BSF    FF1.7
08D0:  GOTO   0918 (RETURN)
.................... } 
....................  
....................  
.................... #ORG 0x4000, 0x4FFE 
.................... void Inicio_SO() 
.................... { 
....................    while (TRUE) 
....................    {        
....................       if(flagcmd){ 
*
4000:  BTFSS  56.0
4002:  BRA    4008
....................          procesa_cmd(); 
4004:  GOTO   03E0
....................       } 
....................       switch(comando) 
4008:  MOVLW  43
400A:  SUBWF  55,W
400C:  ADDLW  EA
400E:  BTFSC  FD8.0
4010:  BRA    4154
4012:  ADDLW  16
4014:  GOTO   075A
....................       { 
....................          case 'C': {    // Cargar proceso especifico 
....................                      if (valor2<6) cargar_proceso(valor2 , 1); 
4018:  MOVF   34,W
401A:  SUBLW  05
401C:  BNC   402E
401E:  MOVFF  34,508
4022:  MOVLW  01
4024:  MOVLB  5
4026:  MOVWF  x09
4028:  MOVLB  0
402A:  CALL   04B4
....................                      break; 
402E:  BRA    4154
....................                    } 
....................          case 'D': {    // Descargar proceso especifico 
....................                      if (valor2<6) descargar_proceso(valor2); 
4030:  MOVF   34,W
4032:  SUBLW  05
4034:  BNC   403E
4036:  MOVFF  34,507
403A:  CALL   0522
....................                      break; 
403E:  BRA    4154
....................                    } 
....................          case 'U': {    // Cargar procesos 1-6 
....................                      for (m=1;m<6;m++) {cargar_proceso(m , 1);} 
4040:  MOVLW  01
4042:  MOVWF  1D
4044:  MOVF   1D,W
4046:  SUBLW  05
4048:  BNC   405E
404A:  MOVFF  1D,508
404E:  MOVLW  01
4050:  MOVLB  5
4052:  MOVWF  x09
4054:  MOVLB  0
4056:  CALL   04B4
405A:  INCF   1D,F
405C:  BRA    4044
....................                      break; 
405E:  BRA    4154
....................                    } 
....................          case 'X': {    // Descargar procesos 1-6 
....................                      for (m=1;m<6;m++) {descargar_proceso(m);} 
4060:  MOVLW  01
4062:  MOVWF  1D
4064:  MOVF   1D,W
4066:  SUBLW  05
4068:  BNC   4076
406A:  MOVFF  1D,507
406E:  CALL   0522
4072:  INCF   1D,F
4074:  BRA    4064
....................                      break; 
4076:  BRA    4154
....................                    } 
....................          case 'M': {    // iniciar/detener carga del calendario 
....................                      if (valor2 == 0) { 
4078:  MOVF   34,F
407A:  BNZ   40C6
....................                         estado_calendario = 3; 
407C:  MOVLW  03
407E:  MOVLB  4
4080:  MOVWF  xF4
....................                         mcm = val1 * val2; 
4082:  MOVFF  38,50A
4086:  MOVFF  37,509
408A:  MOVFF  36,508
408E:  MOVFF  35,507
4092:  MOVFF  3C,50E
4096:  MOVFF  3B,50D
409A:  MOVFF  3A,50C
409E:  MOVFF  39,50B
40A2:  MOVLB  0
40A4:  CALL   05C0
40A8:  MOVFF  01,4F7
40AC:  MOVFF  00,4F6
....................                         limpiar_calendario (mcm); 
40B0:  MOVFF  4F6,507
40B4:  GOTO   061C
....................                         printf("$M0*"); 
40B8:  MOVLW  AA
40BA:  MOVWF  FF6
40BC:  MOVLW  07
40BE:  MOVWF  FF7
40C0:  CALL   0640
....................                      } else if ( valor2 == 1 ){ 
40C4:  BRA    40DC
40C6:  DECFSZ 34,W
40C8:  BRA    40DC
....................                         estado_calendario = 0; 
40CA:  MOVLB  4
40CC:  CLRF   xF4
....................                         printf("$M1*"); 
40CE:  MOVLW  B0
40D0:  MOVWF  FF6
40D2:  MOVLW  07
40D4:  MOVWF  FF7
40D6:  MOVLB  0
40D8:  CALL   0640
....................                      } 
....................                      break; 
40DC:  BRA    4154
....................                    } 
....................          case 'P': {    // Guardar un proceso en el calendario 
....................                      int pos; 
....................                      pos = val1*val2; 
40DE:  MOVFF  38,50A
40E2:  MOVFF  37,509
40E6:  MOVFF  36,508
40EA:  MOVFF  35,507
40EE:  MOVFF  3C,50E
40F2:  MOVFF  3B,50D
40F6:  MOVFF  3A,50C
40FA:  MOVFF  39,50B
40FE:  CALL   05C0
4102:  MOVFF  00,506
....................                      Calendario[pos] = valor2; 
4106:  MOVLW  0B
4108:  MOVLB  5
410A:  ADDWF  x06,W
410C:  MOVWF  FE9
410E:  MOVLW  01
4110:  MOVWF  FEA
4112:  BTFSC  FD8.0
4114:  INCF   FEA,F
4116:  MOVFF  34,FEF
....................                      printf("$P%i*",valor2); 
411A:  MOVLW  24
411C:  BTFSS  F9E.4
411E:  BRA    411C
4120:  MOVWF  FAD
4122:  MOVLW  50
4124:  BTFSS  F9E.4
4126:  BRA    4124
4128:  MOVWF  FAD
412A:  MOVFF  34,507
412E:  MOVLW  18
4130:  MOVWF  x08
4132:  MOVLB  0
4134:  GOTO   068E
4138:  MOVLW  2A
413A:  BTFSS  F9E.4
413C:  BRA    413A
413E:  MOVWF  FAD
....................                      break; 
4140:  BRA    4154
....................                    } 
....................          case 'T': {    // Ejecutar calendario 
....................                      estado_calendario = 1; 
4142:  MOVLW  01
4144:  MOVLB  4
4146:  MOVWF  xF4
....................                      reloj = 0; 
4148:  CLRF   xF3
....................                      break; 
414A:  MOVLB  0
414C:  BRA    4154
....................                    } 
....................          case 'R': {    // Detener Calendario 
....................                      estado_calendario = 0; 
414E:  MOVLB  4
4150:  CLRF   xF4
....................                      break; 
4152:  MOVLB  0
....................                    } 
....................       } 
....................       comando='-'; 
4154:  MOVLW  2D
4156:  MOVWF  55
....................       valor2=100; 
4158:  MOVLW  64
415A:  MOVWF  34
....................       if (estado_calendario == 1){ 
415C:  MOVLB  4
415E:  DECFSZ xF4,W
4160:  BRA    4198
....................          if (Calendario[reloj] != 0){ 
4162:  MOVLW  0B
4164:  ADDWF  xF3,W
4166:  MOVWF  FE9
4168:  MOVLW  01
416A:  MOVWF  FEA
416C:  BTFSC  FD8.0
416E:  INCF   FEA,F
4170:  MOVF   FEF,F
4172:  BZ    4198
....................             cargar_proceso(Calendario[reloj] , 2); 
4174:  MOVLW  0B
4176:  ADDWF  xF3,W
4178:  MOVWF  FE9
417A:  MOVLW  01
417C:  MOVWF  FEA
417E:  BTFSC  FD8.0
4180:  INCF   FEA,F
4182:  MOVFF  FEF,507
4186:  MOVFF  507,508
418A:  MOVLW  02
418C:  MOVLB  5
418E:  MOVWF  x09
4190:  MOVLB  0
4192:  CALL   04B4
4196:  MOVLB  4
....................          } 
....................       } 
....................       if(np>0) 
4198:  MOVF   16,F
419A:  BZ    428E
....................       { 
....................          if(vpcb[colap[0]].estado==1) 
419C:  MOVF   17,W
419E:  MULLW  12
41A0:  MOVF   FF3,W
41A2:  MOVLB  5
41A4:  CLRF   x08
41A6:  MOVWF  x07
41A8:  MOVLW  0C
41AA:  ADDWF  x07,W
41AC:  MOVWF  01
41AE:  MOVLW  00
41B0:  ADDWFC x08,W
41B2:  MOVWF  03
41B4:  MOVF   01,W
41B6:  ADDLW  57
41B8:  MOVWF  FE9
41BA:  MOVLW  00
41BC:  ADDWFC 03,W
41BE:  MOVWF  FEA
41C0:  DECFSZ FEF,W
41C2:  BRA    4224
....................             {activar_timer(); 
41C4:  MOVLB  0
41C6:  CALL   074E
....................              vpcb[colap[0]].estado=2; 
41CA:  MOVF   17,W
41CC:  MULLW  12
41CE:  MOVF   FF3,W
41D0:  MOVLB  5
41D2:  CLRF   x08
41D4:  MOVWF  x07
41D6:  MOVLW  0C
41D8:  ADDWF  x07,W
41DA:  MOVWF  01
41DC:  MOVLW  00
41DE:  ADDWFC x08,W
41E0:  MOVWF  03
41E2:  MOVF   01,W
41E4:  ADDLW  57
41E6:  MOVWF  FE9
41E8:  MOVLW  00
41EA:  ADDWFC 03,W
41EC:  MOVWF  FEA
41EE:  MOVLW  02
41F0:  MOVWF  FEF
....................              goto_address(vpcb[colap[0]].di); 
41F2:  MOVF   17,W
41F4:  MULLW  12
41F6:  MOVF   FF3,W
41F8:  CLRF   x08
41FA:  MOVWF  x07
41FC:  MOVLW  57
41FE:  ADDWF  x07,W
4200:  MOVWF  FE9
4202:  MOVLW  00
4204:  ADDWFC x08,W
4206:  MOVWF  FEA
4208:  MOVFF  FEF,509
420C:  MOVFF  FEC,50A
4210:  MOVFF  FEC,50B
4214:  MOVFF  FEC,50C
4218:  MOVFF  50A,FFA
421C:  MOVFF  509,FE8
4220:  MOVWF  FF9
....................             } 
4222:  BRA    428E
....................          else 
....................             {wreg=vpcb[colap[0]].wreg; 
4224:  MOVF   17,W
4226:  MULLW  12
4228:  MOVF   FF3,W
422A:  CLRF   x08
422C:  MOVWF  x07
422E:  MOVLW  0D
4230:  ADDWF  x07,W
4232:  MOVWF  01
4234:  MOVLW  00
4236:  ADDWFC x08,W
4238:  MOVWF  03
423A:  MOVF   01,W
423C:  ADDLW  57
423E:  MOVWF  FE9
4240:  MOVLW  00
4242:  ADDWFC 03,W
4244:  MOVWF  FEA
4246:  MOVFF  FEF,FE8
....................              activar_timer(); 
424A:  MOVLB  0
424C:  CALL   074E
....................              goto_address(vpcb[colap[0]].da); 
4250:  MOVF   17,W
4252:  MULLW  12
4254:  MOVF   FF3,W
4256:  MOVLB  5
4258:  CLRF   x08
425A:  MOVWF  x07
425C:  MOVLW  08
425E:  ADDWF  x07,W
4260:  MOVWF  01
4262:  MOVLW  00
4264:  ADDWFC x08,W
4266:  MOVWF  03
4268:  MOVF   01,W
426A:  ADDLW  57
426C:  MOVWF  FE9
426E:  MOVLW  00
4270:  ADDWFC 03,W
4272:  MOVWF  FEA
4274:  MOVFF  FEF,507
4278:  MOVFF  FEC,508
427C:  MOVFF  FEC,509
4280:  MOVFF  FEC,50A
4284:  MOVFF  508,FFA
4288:  MOVFF  507,FE8
428C:  MOVWF  FF9
....................             } 
....................       } 
428E:  MOVLB  0
4290:  BRA    4000
....................    } 
4292:  RETURN 0
.................... } 
....................  
.................... void main(void) 
*
08D4:  CLRF   FF8
08D6:  BCF    FD0.7
08D8:  BSF    07.7
08DA:  BCF    FB8.3
08DC:  MOVLW  40
08DE:  MOVWF  FAF
08E0:  MOVLW  A6
08E2:  MOVWF  FAC
08E4:  MOVLW  90
08E6:  MOVWF  FAB
08E8:  CLRF   16
08EA:  CLRF   34
08EC:  CLRF   49
08EE:  CLRF   54
08F0:  BCF    56.0
08F2:  MOVLB  4
08F4:  CLRF   xF3
08F6:  CLRF   xF4
08F8:  CLRF   xF5
08FA:  CLRF   xF7
08FC:  CLRF   xF6
08FE:  MOVF   FC1,W
0900:  ANDLW  C0
0902:  IORLW  0F
0904:  MOVWF  FC1
0906:  MOVLW  07
0908:  MOVWF  FB4
.................... { 
....................    printf("Esperando conexin..*"); 
090A:  MOVLW  B6
090C:  MOVWF  FF6
090E:  MOVLW  07
0910:  MOVWF  FF7
0912:  MOVLB  0
0914:  RCALL  0640
....................     
....................    MCU_Init(); 
0916:  BRA    089E
....................    #asm 
....................    call 0x4000 
0918:  CALL   4000,1
....................    #endasm 
.................... } 
....................  
091C:  SLEEP 

Configuration Fuses:
   Word  1: CC27   PLL12 CPUDIV1 USBDIV HS FCMEN IESO
   Word  2: 1E3E   PUT BROWNOUT BORV21 VREGEN NOWDT WDT32768
   Word  3: 0700   CCP2C1 PBADEN LPT1OSC NOMCLR
   Word  4: 00A1   STVREN NOLVP ICSP2 NOXINST NODEBUG
   Word  5: C00F   NOPROTECT NOCPB NOCPD
   Word  6: E00F   NOWRT NOWRTC NOWRTB NOWRTD
   Word  7: 400F   NOEBTR NOEBTRB
